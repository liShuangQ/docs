import{_ as e}from"./plugin-vue_export-helper-DlAUqK2U.js";import{o as a,c as t,b as s}from"./app-D9Hg6iGQ.js";const r={},o=s('<h2 id="结构" tabindex="-1"><a class="header-anchor" href="#结构"><span>结构</span></a></h2><p>实例-数据库-模式（schema）-表 第一层是实例(Instance)。 第二层是数据库(Database)；一个实例下有多个数据库；每个数据库之间是完全独立的。 第三层是 Schema；数据库下面有多个 Schema；其中“public” 是数据库创建时产生的。 每个 Schema 下面可以创建表，视图，索引，函数，序列，物化视图，外部表等等。</p><h3 id="说明" tabindex="-1"><a class="header-anchor" href="#说明"><span>说明</span></a></h3><p>在 PostgreSQL 每个数据库是完全独立的；所以访问同一个实例下其他数据库需要借用 dblink 或者 fdw 接口）。 在 PostgreSQL 同一实例下，不能直接访问其它数据库【MySQL 可以，因为 MYSQL 跟 PostgreSQL 逻辑结构不一样，MYSQL 实例中的数据库相当于 PostgreSQL 的第三层的 Schema】</p><h3 id="建议" tabindex="-1"><a class="header-anchor" href="#建议"><span>建议</span></a></h3><p>默认访问的 schema 优先查找同用户名的模式，然后查找 public（在创建数据库时默认创建的）所以推荐在创建完数据库后优先创建一个同用户名的 schema 一个数据库，模式用于逻辑区分（当业务复杂并且不使用默认 schema 的时候，使用 schema.table 执行查询等操作）。当简单使用的时候，根据上条建议创建和用户同名模式即可达到默认访问要求（达到类似 mysql 的结构，通过默认 schema 忽略比 mysql 多这一层）。多工程自然是创建多个数据库。</p><h2 id="角色与用户的关系" tabindex="-1"><a class="header-anchor" href="#角色与用户的关系"><span>角色与用户的关系</span></a></h2><p>在 PostgreSQL 中，存在两个容易混淆的概念：角色/用户。之所以说这两个概念容易混淆，是因为对于 PostgreSQL 来说，这是完全相同的两个对象。唯一的区别是在创建的时候：</p><p>1.我用下面的 psql 创建了角色 freeoa： CREATE ROLE freeoa PASSWORD &#39;freeoa&#39;; 接着我使用新创建的角色 freeoa 登录，PostgreSQL 给出拒绝信息：</p><p>FATAL：role &#39;freeoa&#39; is not permitted to log in. 说明该角色没有登录权限，系统拒绝其登录。</p><p>2.我又使用下面的 psql 创建了用户 freeoa2: CREATE USER freeoa2 PASSWORD &#39;freeoa2&#39;; 接着我使用 freeoa2 登录，登录成功。难道这两者有区别吗？查看文档，又这么一段说明：&quot;CREATE USER is the same as CREATE ROLE except that it implies LOGIN.&quot;----CREATE USER 除了默认具有 LOGIN 权限之外，其他与 CREATE ROLE 是完全相同的。</p><p>为了验证这句话，修改 freeoa 的权限，增加 LOGIN 权限：ALTER ROLE freeoa LOGIN;再次用 freeoa 登录，成功！那么事情就明了了：CREATE ROLE freeoa PASSWORD &#39;freeoa&#39; LOGIN 等同于 CREATE USER freeoa PASSWORD &#39;freeoa&#39;.这就是 ROLE/USER 的区别。</p>',12),l=[o];function i(c,n){return a(),t("div",null,l)}const d=e(r,[["render",i],["__file","补充.html.vue"]]),m=JSON.parse('{"path":"/back-end/dbs/db/%E5%B8%B8%E7%94%A8%E6%95%B0%E6%8D%AE%E5%BA%93/PostgregSql/%E8%A1%A5%E5%85%85.html","title":"补充","lang":"zh-CN","frontmatter":{"title":"补充","category":["介绍"],"tag":["数据库","pg","postgregsql"]},"headers":[{"level":2,"title":"结构","slug":"结构","link":"#结构","children":[{"level":3,"title":"说明","slug":"说明","link":"#说明","children":[]},{"level":3,"title":"建议","slug":"建议","link":"#建议","children":[]}]},{"level":2,"title":"角色与用户的关系","slug":"角色与用户的关系","link":"#角色与用户的关系","children":[]}],"git":{"createdTime":1713857586000,"updatedTime":1714038327000,"contributors":[{"name":"shuangqi.li","email":"li_shuangq@foxmail.com","commits":2}]},"readingTime":{"minutes":2.2,"words":659},"filePathRelative":"back-end/dbs/db/常用数据库/PostgregSql/补充.md","localizedDate":"2024年4月23日"}');export{d as comp,m as data};
